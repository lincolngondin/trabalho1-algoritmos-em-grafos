We establish an optimal \emph{Widder theory} for a weighted porous medium equation with rough and inhomogeneous density that may be singular at a point and tends to zero at spatial infinity. Specifically, for this equation, we identify a class $X$ of initial measure data that give rise to very weak solutions, we show that non-negative very weak solutions necessarily admit an initial trace in $X$ at time $t=0$, and we prove that any two non-negative solutions having the same initial trace are equal. The corresponding theory for the classical (unweighted) equation was established by exploiting various properties that are not available in our weighted setting, such as the continuity of solutions, the explicit scale invariance of the equation, Aleksandrov's reflection principle, and the Aronson--BÃ©nilan inequality. Therefore, to complete the Widder theory, we must devise several proofs by means of entirely new methods. We also establish an optimal quantitative \emph{a priori} smoothing estimate for unsigned local solutions without resorting to scale invariance, which seems to be new in this form even for the classical porous medium equation. Finally, we show that non-negative very weak solutions are always locally bounded, and in particular that they have locally finite energy.